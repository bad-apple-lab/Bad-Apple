## Bad Apple!!

Play the video in the console as ASCII art. 
~~You can watch anime by it while you are connected by **SSH**.~~

以 ASCII art 的形式在控制台中播放视频. 
~~你甚至可以利用它在 **SSH** 中看番.~~

![GIF](./play.gif)

### Performance

1080p60Hz on modern high-performance PCs.

### Help

The file extension generated by preloading is `.badapple`.
Automatically enter preload-replay mode when the input file extension is `.badapple`.

```markdown
usage: badapple [options] ... 
  (BadApple-ffmpeg_or_opencv-os-isa-v2.0.1)
options:
  -i, --input                   video file (string [=./badapple.mp4])
  -o, --output                  [preload] output file (string [=])
  -a, --audio                   audio file (string [=])
  -m, --map                     font data file (string [=])
  -s, --scale                   width:height (string [=72:54])
  -r, --rate                    frame rate (double [=1024])
      --not-clear               don't clear screen (using ANSI) before print a frame
      --contrast-enhancement    contrast Enhancement
      --preload                 [preload]
      --play-audio              play audio with ffplay
  -?, --help                    print this message
```

### Clone

```sh
git clone --recurse-submodules --remote-submodule https://github.com/userElaina/Bad-Apple.git
```

### To do

Automatic parameter setting through information from video and hardware.

### License

The code is available under the [MIT license](./LICENSE).

### How to use

*Only tested on x86_64

**[Fonts Pre-processing](#fonts-pre-processing)**

**[Windows-FFmpeg](#windows-ffmpeg)**
**[Windows-OpenCV](#windows-opencv)**

**[Linux-FFmpeg](#linux-ffmpeg)**
**[Linux-OpenCV](#linux-opencv)**

#### Fonts Pre-processing

##### Dependencies

```sh
pip install pillow
```

##### Interpret and Run

```sh
python -u "font/font.py"
```

#### Windows-FFmpeg

##### Dependencies

[FFmpeg](https://github.com/BtbN/FFmpeg-Builds/releases/tag/latest)
(Include `ffmpeg` `ffprobe` `ffplay`)

##### Compile and Run

```sh
clang++ "badapple.cpp" -o "badapple-ffmpeg-win.exe" -w -g -O3 -static-libgcc --target=x86_64-w64-mingw
./badapple-ffmpeg-win
```

or

```sh
g++ "badapple.cpp" -o "badapple-ffmpeg-win.exe" -w -g -O3 -static-libgcc
./badapple-ffmpeg-win
```

#### Windows-OpenCV

##### Dependencies

[OpenCV](https://opencv.org/)

You may need to [compile it yourself](https://github.com/userElaina/OpenCV-460-MinGW-W64-Build).

##### Compile and Run

```sh
clang++ "badapple.cpp" -o "badapple-opencv-win.exe" -I "$Env:OPENCV_PATH\include" -I "$Env:OPENCV_PATH\include\opencv2" -L "$Env:OPENCV_PATH\x64\mingw\lib" -llibopencv_world460 -w -g -O3 -static-libgcc --target=x86_64-w64-mingw
./badapple-opencv-win
```

or

```sh
g++ "badapple.cpp" -o "badapple-opencv-win.exe" -I "$Env:OPENCV_PATH\include" -I "$Env:OPENCV_PATH\include\opencv2" -L "$Env:OPENCV_PATH\x64\mingw\lib" -llibopencv_world460 -w -g -O3 -static-libgcc
./badapple-opencv-win
```

### Linux-FFmpeg

#### Compile

##### Dependencies

Use your package manager to install or upgrade C++ compiler, FFmpeg and dependencies if need, like

```sh
sudo apt update
sudo apt install upgrade gcc g++ ffmpeg
```

```sh
sudo pacman -Syu gcc ffmpeg
```

##### Compile and Run

```sh
g++ "badapple.cpp" -o "badapple-ffmpeg-linux.out" -w -g -O3 -static-libgcc
./badapple-ffmpeg-linux.out
```

#### Linux-OpenCV

##### Dependencies

Use your package manager to install or upgrade C++ compiler, OpenCV and dependencies if need, like

```sh
sudo apt update
sudo apt install upgrade gcc g++ libopencv-dev
```

```sh
sudo pacman -Syu gcc opencv vtk hdf5 pkgconf
```

##### Compile and Run

```sh
g++ "badapple.cpp" -o "badapple-opencv-linux.out" -w -g -O3 -static-libgcc `pkg-config --cflags --libs opencv4`
./badapple-opencv-linux.out
```

```sh
g++ "badapple.cpp" -o "badapple-opencv-linux.out" -w -g -O3 -static-libgcc `pkgconf --cflags --libs opencv4`
./badapple-opencv-linux.out
```
